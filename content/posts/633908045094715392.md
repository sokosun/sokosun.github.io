---
date: 2020-11-05T02:03:41Z
title: "ImageMagick おぼえがき"
---

# 概要

ImageMagick という画像ファイルの処理に特化した多機能なコンソールプログラムがあるのですが、
簡単な処理のために毎回使い方を調べている気がするので、よく使うコマンドを記録しました。

# コマンド

### ファイル形式を変更

    // png から jpg に変換
    $ magick src.png dst.jpg

### アニメーションgifを作る

    // 5 fps (1 フレームあたり 20 / 100 sec), 無限ループ
    $ magick convert -delay 20 -loop 0 *.jpg output.gif

### 単一ファイル処理

    $ magick src.jpg  dst.jpg

引数の順番が大事。

### 複数ファイル一括処理

    // src ディレクトリ内のファイル全てに対してした結果を dst ディレクトリにそれぞれ同名で保存
    $ magick ./src/*.jpg -set filename:f %t  ./dst/%[filename:f].jpg

###  クロップ

    // 左上から右に10px、下に20pxの位置を基準(クロップ範囲の左上)に 横640x縦480 のサイズでクロップ
    -crop 640x480+10+20

なお基準位置の方位指定オプションもあり(デフォルト左上)

###  リサイズ

    // アスペクト比を維持したまま 1600x1200 に収まる最大サイズへサイズ変更
    -resize 1600x1200

###  圧縮率指定

    // 85 を超えるとファイルサイズが急激に大きくなるらしい、最大100
    -quality 85

# 補足

ググると convert コマンドが紹介されることが多いが、古い形式なので基本的に magick と読み替えれば大丈夫。
または "$ magick convert ..." とすればいいはず。
